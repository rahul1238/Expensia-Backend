spring.application.name=backend

# Debugging configuration for transaction detection
logging.level.com.expensia.backend.service.ai.TransactionAIService=INFO
logging.level.com.expensia.backend.service.gmail.GmailSyncService=INFO

# Externalized sensitive settings (set via environment variables or JVM -D properties)
# MongoDB: export MONGODB_URI='mongodb+srv://<user>:<pass>@<host>/<db>?retryWrites=true&w=majority'
spring.data.mongodb.uri=${MONGODB_URI:}

# Server
server.port=${SERVER_PORT:8080}

# JWT (DO NOT commit real secrets)  e.g. export JWT_SECRET=base64-encoded-secret
jwt.secret=${JWT_SECRET:change-me-in-env}
jwt.access-token.expiration=${JWT_ACCESS_EXP:3600000}
jwt.refresh-token.expiration=${JWT_REFRESH_EXP:604800000}

spring.jackson.serialization.indent_output=true
# Scheduling is enabled; background Gmail sync runs every 30 minutes.
spring.data.mongodb.auto-index-creation=true

# Google OAuth2 (values must be provided via environment; leaving blank avoids push protection)
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:}
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

app.oauth2.authorized-redirect-uris=${OAUTH2_REDIRECT_URIS:http://localhost:5173/auth/callback}

# Gmail feature config
# Backend callback will be {app.base-url}/api/gmail/callback
app.base-url=${APP_BASE_URL:http://localhost:8080}
frontend.base-url=${FRONTEND_BASE_URL:http://localhost:5173}

# CORS allowed origins (comma-separated), overridable via env APP_CORS_ALLOWED_ORIGINS
# Default allows Viteâ€™s usual ports 5173 and 5174
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:5174}


# AI transaction evaluator (optional). Provide GEMINI API key to enable AI fallback.
ai.gemini.api.url=${GEMINI_API_URL:https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent}
ai.gemini.api.key=${GEMINI_API_KEY:}

# Comma-separated list of allowed bank sender domains for Gmail sync and parsing filters
# Enhanced list including payment gateways, digital wallets, and missing bank domains
app.bank.domains=${APP_BANK_DOMAINS:hdfcbank.net,icicibank.com,axisbank.com,sbi.co.in,kotak.com,yesbank.in,idfcbank.com,rblbank.com,indusind.com,federalbank.co.in,unionbankofindia.co.in,bobibanking.com,idbi.com,bankofindia.co.in,canarabank.com,kvbmail.com,aubank.in,citi.com,hsbc.co.in,standardchartered.com,paypal.com,paypal.co.in,paytm.com,phonepe.com,amazonpay.in,razorpay.com,stripe.com,instamojo.com,amazon.in,flipkart.com,myntra.com,pnb.co.in,centralbankofindia.co.in,indianbank.co.in,alerts.hdfcbank.net,mail.icicibank.com,notification.paytm.com,updates.phonepe.com}

